(function(){var t,i,e,n,r,a=[].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1};r="undefined"!=typeof exports&&null!==exports?exports:this,t=["pilots","upgrades","modifications","titles"],i={pilots:"Pilot",modifications:"Modification",titles:"Title"},e=function(t,i){var e,n;return e=t.name.toLowerCase().replace(/[^a-zA-Z0-9]/g,""),n=i.name.toLowerCase().replace(/[^a-zA-Z0-9]/g,""),n>e?-1:e>n?1:0},n=function(t,i){return t.data.points<i.data.points?-1:i.data.points<t.data.points?1:e(t,i)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},r.CardBrowser=function(){function s(t){this.container=$(t.container),this.currently_selected=null,this.prepareData(),this.setupUI(),this.setupHandlers(),this.sort_selector.change()}return s.prototype.setupUI=function(){return this.container.append($.trim('<div class="container-fluid xwing-card-browser">\n    <div class="row-fluid">\n        <div class="span12">\n            Sort cards by: <select class="sort-by">\n                <option value="name">Name</option>\n                <option value="source">Source</option>\n                <option value="type-by-points">Type (by Points)</option>\n                <option value="type-by-name" selected="1">Type (by Name)</option>\n            </select>\n        </div>\n    </div>\n    <div class="row-fluid">\n        <div class="span4 card-selector-container">\n\n        </div>\n        <div class="span8">\n            <div class="well card-viewer-placeholder info-well">\n                <p>Select a card from the list at the left.</p>\n            </div>\n            <div class="well card-viewer-container info-well">\n                <span class="info-name"></span>\n                <br />\n                <span class="info-type"></span>\n                <br />\n                <span class="info-sources"></span>\n                <table>\n                    <tbody>\n                        <tr class="info-skill">\n                            <td>Skill</td>\n                            <td class="info-data info-skill"></td>\n                        </tr>\n                        <tr class="info-attack">\n                            <td><img class="icon-attack" src="images/transparent.png" alt="Attack" /></td>\n                            <td class="info-data info-attack"></td>\n                        </tr>\n                        <tr class="info-range">\n                            <td>Range</td>\n                            <td class="info-data info-range"></td>\n                        </tr>\n                        <tr class="info-agility">\n                            <td><img class="icon-agility" src="images/transparent.png" alt="Agility" /></td>\n                            <td class="info-data info-agility"></td>\n                        </tr>\n                        <tr class="info-hull">\n                            <td><img class="icon-hull" src="images/transparent.png" alt="Hull" /></td>\n                            <td class="info-data info-hull"></td>\n                        </tr>\n                        <tr class="info-shields">\n                            <td><img class="icon-shields" src="images/transparent.png" alt="Shields" /></td>\n                            <td class="info-data info-shields"></td>\n                        </tr>\n                        <tr class="info-actions">\n                            <td>Actions</td>\n                            <td class="info-data"></td>\n                        </tr>\n                        <tr class="info-upgrades">\n                            <td>Upgrades</td>\n                            <td class="info-data"></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <p class="info-text" />\n            </div>\n        </div>\n    </div>\n</div>')),this.card_selector_container=$(this.container.find(".xwing-card-browser .card-selector-container")),this.card_viewer_container=$(this.container.find(".xwing-card-browser .card-viewer-container")),this.card_viewer_container.hide(),this.card_viewer_placeholder=$(this.container.find(".xwing-card-browser .card-viewer-placeholder")),this.sort_selector=$(this.container.find("select.sort-by")),this.sort_selector.select2({minimumResultsForSearch:-1})},s.prototype.setupHandlers=function(){var t=this;return this.sort_selector.change(function(){return t.renderList(t.sort_selector.val())})},s.prototype.prepareData=function(){var s,o,d,c,l,h,f,p,_,u,v,w,y,g,m,b,k,x,T,C,$,P,U,O,S;for(this.all_cards=[],h=0,u=t.length;u>h;h++)l=t[h],this.all_cards="upgrades"===l?this.all_cards.concat(function(){var t,i;t=r[l],i=[];for(d in t)o=t[d],i.push({name:d,type:""+o.slot+" Upgrade",data:o});return i}()):this.all_cards.concat(function(){var t,e;t=r[l],e=[];for(d in t)o=t[d],e.push({name:d,type:i[l],data:o});return e}());this.types=["Pilot","Modification","Title"],x=r.upgrades;for(d in x)o=x[d],T=""+o.slot+" Upgrade",a.call(this.types,T)<0&&this.types.push(""+o.slot+" Upgrade");for(this.all_cards.sort(e),this.sources=[],C=this.all_cards,f=0,v=C.length;v>f;f++)for(s=C[f],$=s.data.sources,p=0,w=$.length;w>p;p++)c=$[p],a.call(this.sources,c)<0&&this.sources.push(c);for(this.cards_by_type_name={},P=this.types.sort(),_=0,y=P.length;y>_;_++)l=P[_],this.cards_by_type_name[l]=function(){var t,i,e,n;for(e=this.all_cards,n=[],i=0,t=e.length;t>i;i++)s=e[i],s.type===l&&n.push(s);return n}.call(this).sort(e);for(this.cards_by_type_points={},U=this.types.sort(),b=0,g=U.length;g>b;b++)l=U[b],this.cards_by_type_points[l]=function(){var t,i,e,n;for(e=this.all_cards,n=[],i=0,t=e.length;t>i;i++)s=e[i],s.type===l&&n.push(s);return n}.call(this).sort(n);for(this.cards_by_source={},O=this.sources,S=[],k=0,m=O.length;m>k;k++)c=O[k],S.push(this.cards_by_source[c]=function(){var t,i,e,n;for(e=this.all_cards,n=[],i=0,t=e.length;t>i;i++)s=e[i],a.call(s.data.sources,c)>=0&&n.push(s);return n}.call(this).sort(e));return S},s.prototype.renderList=function(t){var i,e,n,r,a,s,o,d,c,l,h,f,p,_,u,v,w,y,g,m,b,k,x,T,C,P=this;switch(null==t&&(t="name"),null!=this.card_selector&&this.card_selector.remove(),this.card_selector=$(document.createElement("SELECT")),this.card_selector.addClass("card-selector"),this.card_selector.attr("size",25),this.card_selector_container.append(this.card_selector),t){case"type-by-name":for(g=this.types,a=0,c=g.length;c>a;a++)for(r=g[a],e=$(document.createElement("OPTGROUP")),e.attr("label",r),this.card_selector.append(e),m=this.cards_by_type_name[r],s=0,l=m.length;l>s;s++)i=m[s],this.addCardTo(e,i);break;case"type-by-points":for(b=this.types,o=0,h=b.length;h>o;o++)for(r=b[o],e=$(document.createElement("OPTGROUP")),e.attr("label",r),this.card_selector.append(e),k=this.cards_by_type_points[r],d=0,f=k.length;f>d;d++)i=k[d],this.addCardTo(e,i);break;case"source":for(x=this.sources,v=0,p=x.length;p>v;v++)for(n=x[v],e=$(document.createElement("OPTGROUP")),e.attr("label",n),this.card_selector.append(e),T=this.cards_by_source[n],w=0,_=T.length;_>w;w++)i=T[w],this.addCardTo(e,i);break;default:for(C=this.all_cards,y=0,u=C.length;u>y;y++)i=C[y],this.addCardTo(this.card_selector,i)}return this.card_selector.change(function(){return P.renderCard($(P.card_selector.find(":selected")))})},s.prototype.renderCard=function(t){var i,e,n,a,s,o,d,c,l,h,f,p,_;switch(e=t.data("name"),a=t.data("type"),i=t.data("card"),this.card_viewer_container.find(".info-name").html(""+(i.unique?"&middot;&nbsp;":"")+e+" ("+i.points+")"),this.card_viewer_container.find("p.info-text").html(null!=(s=i.text)?s:""),this.card_viewer_container.find(".info-sources").text(i.sources.sort().join(", ")),a){case"Pilot":n=r.ships[i.ship],this.card_viewer_container.find(".info-type").text(""+i.ship+" Pilot ("+n.faction+")"),this.card_viewer_container.find("tr.info-skill td.info-data").text(i.skill),this.card_viewer_container.find("tr.info-skill").show(),this.card_viewer_container.find("tr.info-attack td.info-data").text(null!=(o=null!=(d=i.ship_override)?d.attack:void 0)?o:n.attack),this.card_viewer_container.find("tr.info-attack").show(),this.card_viewer_container.find("tr.info-range").hide(),this.card_viewer_container.find("tr.info-agility td.info-data").text(null!=(c=null!=(l=i.ship_override)?l.agility:void 0)?c:n.agility),this.card_viewer_container.find("tr.info-agility").show(),this.card_viewer_container.find("tr.info-hull td.info-data").text(null!=(h=null!=(f=i.ship_override)?f.hull:void 0)?h:n.hull),this.card_viewer_container.find("tr.info-hull").show(),this.card_viewer_container.find("tr.info-shields td.info-data").text(null!=(p=null!=(_=i.ship_override)?_.shields:void 0)?p:n.shields),this.card_viewer_container.find("tr.info-shields").show(),this.card_viewer_container.find("tr.info-actions td.info-data").text(r.ships[i.ship].actions.join(", ")),this.card_viewer_container.find("tr.info-actions").show(),this.card_viewer_container.find("tr.info-upgrades").show(),this.card_viewer_container.find("tr.info-upgrades td.info-data").text(i.slots.join(", ")||"None");break;default:this.card_viewer_container.find(".info-type").text(a),null!=i.faction&&this.card_viewer_container.find(".info-type").append(" &ndash; "+i.faction+" only"),this.card_viewer_container.find("tr.info-ship").hide(),this.card_viewer_container.find("tr.info-skill").hide(),null!=i.attack?(this.card_viewer_container.find("tr.info-attack td.info-data").text(i.attack),this.card_viewer_container.find("tr.info-attack").show()):this.card_viewer_container.find("tr.info-attack").hide(),null!=i.range?(this.card_viewer_container.find("tr.info-range td.info-data").text(i.range),this.card_viewer_container.find("tr.info-range").show()):this.card_viewer_container.find("tr.info-range").hide(),this.card_viewer_container.find("tr.info-agility").hide(),this.card_viewer_container.find("tr.info-hull").hide(),this.card_viewer_container.find("tr.info-shields").hide(),this.card_viewer_container.find("tr.info-actions").hide(),this.card_viewer_container.find("tr.info-upgrades").hide()}return this.card_viewer_container.show(),this.card_viewer_placeholder.hide()},s.prototype.addCardTo=function(t,i){var e;return e=$(document.createElement("OPTION")),e.text(""+i.name+" ("+i.data.points+")"),e.data("name",i.name),e.data("type",i.type),e.data("card",i.data),$(t).append(e)},s}()}).call(this);
//@ sourceMappingURL=browser.min.map